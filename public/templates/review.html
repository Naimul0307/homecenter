<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/review.css">
    <link rel="stylesheet" href="../css/receipt.css">
    
    <!-- Use the latest version of jsPDF and html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    
    <title>HomeCentre - Review</title>
</head>
<body>
    <div class="review-container">
        <div class="review-header">
            <div class="logo"></div>
        </div>

        <div class="review-body">
            <p class="message">The Heart of Every Home Beats with You</p>
            <p class="description">Behind every cozy space, every cherished memory, and every heartwarming moment is you, the woman who makes it all possible.</p>
            <button class="confirm-button" id="review-confirm-btn">REVIEW AND CONFIRM</button>
        </div>
    </div>

    <!-- Hidden Receipt Popup -->
    <div class="overlay" id="overlay">
        <div class="receipt-container" id="receipt-container">
            <div class="receipt-content">
                <button class="close-btn" id="close-btn">&times;</button> <!-- Close Button -->

                <div class="receipt-header">
                    <div class="logo"></div>
                </div>

                <hr class="divider">
                
                <div class="receipt-body">
                    <p class="greeting">Dear Arja</p>
                    <p class="thank-you">Thank you for</p>
                    <ul class="items-list">
                        <!-- Add your items dynamically here -->
                    </ul>
        
                    <hr class="divider">
        
                    <p class="total">Total : <span class="price">PRICELESS</span></p>
        
                    <hr class="divider">
        
                    <p class="tribute">This isn’t just a receipt. It’s a tribute.</p>
                    <p class="tribute-text">To the love, the sacrifices, the strength that hold homes together.</p>
                    <p class="you-are">YOU are seen. YOU are valued. YOU are extraordinary.</p>
                </div>

                <div class="footer">
                    
                </div>
                <button class="pdf-btn" id="pdf-btn">Generate PDF</button>
            </div>
        </div>
    </div>

    <script src="../js/review.js"></script>
    <script>
        document.getElementById('pdf-btn').addEventListener('click', function() {
            const { jsPDF } = window.jspdf;

            // Ensure html2canvas is loaded correctly
            if (typeof html2canvas !== 'function') {
                console.error("html2canvas is not loaded correctly.");
                return;
            }

            // Capture the content of the receipt container using html2canvas
            html2canvas(document.getElementById('receipt-container')).then(function(canvas) {
                if (canvas) {
                    // Convert the canvas to an image
                    const imgData = canvas.toDataURL('image/png');
                    
                    // Create a jsPDF instance and add the image to the PDF
                    const doc = new jsPDF();
                    doc.addImage(imgData, 'PNG', 10, 10, 180, 0); // Adjust dimensions as needed
                    
                    // Save the generated PDF
                    doc.save('receipt.pdf');
                } else {
                    console.error('Canvas could not be generated');
                }
            }).catch(function(error) {
                console.error("Error generating the PDF: ", error);
            });
        });
    </script>
</body>
</html>
